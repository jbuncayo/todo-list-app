document.addEventListener("DOMContentLoaded", function () { const tasks = JSON.parse(localStorage.getItem("tasks")) || []; renderTasks(tasks); document.getElementById("new-task-form").addEventListener("submit", function (e) { e.preventDefault(); const newTaskInput = document.getElementById("new-task-input"); const taskText = newTaskInput.value.trim(); if (taskText !== "") { const newTask = { id: Date.now(), text: taskText, completed: false, }; tasks.push(newTask); localStorage.setItem("tasks", JSON.stringify(tasks)); newTaskInput.value = ""; renderTasks(tasks); } }); window.toggleTaskCompletion = function (taskId) { const taskIndex = tasks.findIndex((task) => task.id === taskId); if (taskIndex !== -1) { tasks[taskIndex].completed = !tasks[taskIndex].completed; localStorage.setItem("tasks", JSON.stringify(tasks)); renderTasks(tasks); } }; function renderTasks(tasks) { const tasksContainer = document.getElementById("tasks"); tasksContainer.innerHTML = ""; tasks.forEach((task) => { const taskElement = document.createElement("div"); taskElement.classList.add("task"); const completedClass = task.completed ? "completed" : ""; const infoMessage = task.completed ? "Task completed! " : ""; taskElement.innerHTML = `<div class="info-message ${completedClass}">${infoMessage}</div><div class="content ${completedClass}"><input type="text" class="text" value="${task.text}" readonly="readonly"></div><div class="actions"><button class="edit" onclick="editTask(${task.id})"><i class="fas fa-edit"></i>Edit</button><button class="save" onclick="saveTask(${task.id})"><i class="fas fa-save"></i>Save</button><button class="delete" onclick="deleteTask(${task.id})"><i class="fas fa-trash-alt"></i>Delete</button><button class="complete" onclick="toggleTaskCompletion(${task.id})">${ task.completed ? '<i class="fas fa-undo"></i>Undo' : '<i class="fas fa-check"></i>Complete' }</button></div>`; tasksContainer.appendChild(taskElement); }); } window.editTask = function (taskId) { const tasksIndex = tasks.findIndex((task) => task.id === taskId); if (tasksIndex !== -1) { const taskElement = document.querySelector(`.task:nth-child(${tasksIndex * 2 + 1})`); const textElement = taskElement.querySelector(".text"); const saveButton = taskElement.querySelector(".save"); textElement.removeAttribute("readonly"); saveButton.style.display = "inline"; textElement.focus(); } }; window.saveTask = function (taskId) { const tasksIndex = tasks.findIndex((task) => task.id === taskId); if (tasksIndex !== -1) { const taskElement = document.querySelector(`.task:nth-child(${tasksIndex * 2 + 1})`); const textElement = taskElement.querySelector(".text"); const saveButton = taskElement.querySelector(".save"); const newText = textElement.value.trim(); if (newText !== "") { tasks[tasksIndex].text = newText; localStorage.setItem("tasks", JSON.stringify(tasks)); renderTasks(tasks); } else { textElement.value = tasks[tasksIndex].text; } textElement.setAttribute("readonly", "readonly"); saveButton.style.display = "none"; } }; window.deleteTask = function (taskId) { const confirmDelete = confirm("Are you sure you want to delete this task?"); if (confirmDelete) { const filteredTasks = tasks.filter((task) => task.id !== taskId); localStorage.setItem("tasks", JSON.stringify(filteredTasks)); renderTasks(filteredTasks); } }; });